---
import Layout from "../layouts/ResumeLayout.astro";
import { getPosts, type WPPost } from "../lib/wp";
import { decodeHTML } from "../lib/html";

const posts: WPPost[] = await getPosts(3); // show 3 latest on the frontpage
---

<Layout title="The Lions Alliance">
  <section class="hero">
    <div class="hero-grid">
      <div class="hero-main">
        <p class="hero-tagline">PORTFOLIO · WEB · 3D</p>
        <h1 class="hero-title">
          Hi, I'm <span class="hero-highlight">Daniël</span>
        </h1>
        <p class="hero-text">
            I do a lot of really cool things with programming, 3D, storytelling, and electronics.
            This portfolio contains both my development blog where I write about my projects as I am working on them, as well as a showcase of the finished projects.
        </p>

        <div class="hero-actions">
          <a href="#work" class="button-primary">
            View finished work
          </a>
          <a href="#writing" class="button-ghost">
            Read the latest posts
          </a>
        </div>

        <p class="hero-subnote">
          Best experienced on desktop for 3D, but fully browsable on mobile.
        </p>
      </div>

      <aside class="hero-side">
        <div class="pill">Currently exploring</div>
        <!-- <h2 class="hero-side-title">side title</h2> -->
        <ul class="hero-side-list">
          <li>• Robotic Horse</li>
          <li>• Brief aan Jan</li>
          <li>• Old Radio</li>
          <li>• Puzzle Lantern</li>
          <li>• Home Streaming</li>
        </ul>
      </aside>
    </div>
  </section>

  <section id="work" class="section">
    <div class="section-header">
      <h2 class="section-title">Finished Projects</h2>
      <p class="section-subtitle">A quick overview of some of the projects I have finished</p>
    </div>

    <div class="cards-grid">
      <article class="card">
        <h3 class="card-title">Card Title</h3>
        <p class="card-meta">Card - Meta - Info</p>
        <p>
          A short description of the project goes here. What technologies were used, what was the goal, etc.
        </p>
      </article>

      <article class="card">
        <h3 class="card-title">Card Title</h3>
        <p class="card-meta">Card - Meta - Info</p>
        <p>
          A short description of the project goes here. What technologies were used, what was the goal, etc.
        </p>
      </article>

    </div>
  </section>

  <section id="writing" class="section">
    <div class="section-header">
      <h2 class="section-title">Latest Blogposts</h2>
      <a href="/blog/" class="section-link">View all posts →</a>
    </div>

    {posts.length === 0 && (
      <p>No posts found yet. Once you publish on WordPress, they’ll show up here.</p>
    )}

    {posts.length > 0 && (
      <ul class="post-list">
        {posts.map((post) => (
          <li class="post-card">
            <a href={`/blog/${post.slug}/`} class="post-title">
              {decodeHTML(post.title.rendered)}
            </a>

            <p class="post-meta">
              <time datetime={post.date}>
                {new Date(post.date).toLocaleDateString("en-GB", {
                  year: "numeric",
                  month: "short",
                  day: "2-digit",
                })}
              </time>
            </p>

            <p class="post-excerpt" set:html={post.excerpt.rendered} />
          </li>
        ))}
      </ul>
    )}
  </section>

  <section class="section">
    <div class="section-header">
      <h2 class="section-title">Get in contact</h2>
    </div>
    <div class="contact-block">
      <p>
        Feel free to reach out if you are interested in my work, have any questions, or just want to say hi!
      </p>
      <p>
        You can reach me at
        <a href="mailto:info.mvdvl@gmail.com">info.mvdvl@gmail.com</a>.
      </p>
    </div>
  </section>
</Layout>
