---
import Layout from "../layouts/Layout.astro";
import { getPosts, type WPPost } from "../lib/wp";
import { decodeHTML } from "../lib/html";

const posts: WPPost[] = await getPosts(3); // show 3 latest on the frontpage
---

<Layout title="The Lions Alliance">
  <section class="hero">
    <div class="hero-grid">
      <div class="hero-main">
        <p class="hero-tagline">PORTFOLIO Â· WEB Â· 3D</p>
        <h1 class="hero-title">
          Hi, Iâ€™m <span class="hero-highlight">Dan</span> â€” I build interactive
          web experiences and write about the process.
        </h1>
        <p class="hero-text">
          From ThreeJS experiments to headless CMS setups, this space is my
          playground for tools, worlds, and ideas that refuse to stay flat.
        </p>

        <div class="hero-actions">
          <a href="#work" class="button-primary">
            View selected work
          </a>
          <a href="#writing" class="button-ghost">
            Read the latest posts
          </a>
        </div>

        <p class="hero-subnote">
          Best experienced on desktop for 3D, but fully browsable on mobile. ðŸŒ±
        </p>
      </div>

      <aside class="hero-side">
        <div class="pill">Currently exploring</div>
        <h2 class="hero-side-title">A better way to blend story, code, and 3D.</h2>
        <ul class="hero-side-list">
          <li>â€¢ ThreeJS scenes integrated into Astro frontends</li>
          <li>â€¢ WordPress as a headless content engine</li>
          <li>â€¢ Crafting interfaces that feel like quiet forests, not dashboards</li>
        </ul>
      </aside>
    </div>
  </section>

  <section id="work" class="section">
    <div class="section-header">
      <h2 class="section-title">Selected work</h2>
      <p class="section-subtitle">A snapshot of what I like building.</p>
    </div>

    <div class="cards-grid">
      <article class="card">
        <h3 class="card-title">Interactive 3D landing concepts</h3>
        <p class="card-meta">ThreeJS Â· Astro Â· Desktop-first</p>
        <p>
          Experimental hero sections where users can orbit, zoom, and discover
          content through motion and depth, without sacrificing performance.
        </p>
      </article>

      <article class="card">
        <h3 class="card-title">Headless blog setup</h3>
        <p class="card-meta">WordPress REST API Â· Astro</p>
        <p>
          A clean separation between content and presentation, using WordPress
          as a headless CMS feeding into a fast, static Astro frontend.
        </p>
      </article>
    </div>
  </section>

  <section id="writing" class="section">
    <div class="section-header">
      <h2 class="section-title">Latest writing</h2>
      <a href="/blog/" class="section-link">View all posts â†’</a>
    </div>

    {posts.length === 0 && (
      <p>No posts found yet. Once you publish on WordPress, theyâ€™ll show up here.</p>
    )}

    {posts.length > 0 && (
      <ul class="post-list">
        {posts.map((post) => (
          <li class="post-card">
            <a href={`/blog/${post.slug}/`} class="post-title">
              {decodeHTML(post.title.rendered)}
            </a>

            <p class="post-meta">
              <time datetime={post.date}>
                {new Date(post.date).toLocaleDateString("en-GB", {
                  year: "numeric",
                  month: "short",
                  day: "2-digit",
                })}
              </time>
            </p>

            <p class="post-excerpt" set:html={post.excerpt.rendered} />
          </li>
        ))}
      </ul>
    )}
  </section>

  <section class="section">
    <div class="section-header">
      <h2 class="section-title">Say hello</h2>
    </div>
    <div class="contact-block">
      <p>
        Want to talk about a project, collaboration, or just nerd out about web
        and 3D?
      </p>
      <p>
        You can reach me at
        <!-- replace with your real email or contact link -->
        <a href="mailto:you@example.com">you@example.com</a>.
      </p>
    </div>
  </section>
</Layout>
